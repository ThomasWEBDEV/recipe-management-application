<div class="row">
  <div class="col-md-8">
    <div class="card-trip">
      <%= image_tag "https://picsum.photos/seed/#{@recipe.id}/800/400", class: "w-100" %>
      <div class="card-trip-infos">
        <div>
          <h2><%= @recipe.title %></h2>
          <p><%= @recipe.description %></p>
          <span class="badge bg-primary"><%= @recipe.category %></span>
        </div>
      </div>
    </div>

    <div class="d-flex gap-3 my-3">
      <% if @recipe.prep_time.present? %>
        <span class="badge bg-info text-dark">
          <i class="fas fa-clock"></i> Préparation : <%= @recipe.prep_time %> min
        </span>
      <% end %>

      <% if @recipe.cook_time.present? %>
        <span class="badge bg-warning text-dark">
          <i class="fas fa-fire"></i> Cuisson : <%= @recipe.cook_time %> min
        </span>
      <% end %>

      <% if @recipe.prep_time.present? && @recipe.cook_time.present? %>
        <span class="badge bg-success">
          <i class="fas fa-utensils"></i> Total : <%= @recipe.prep_time + @recipe.cook_time %> min
        </span>
      <% end %>
    </div>

    <% if @recipe.user == current_user %>
      <div class="mt-3">
        <%= link_to "Modifier", edit_recipe_path(@recipe), class: "btn btn-ghost" %>
        <%= button_to "Supprimer", @recipe, method: :delete, data: { turbo_confirm: "Êtes-vous sûr ?" }, class: "btn btn-danger" %>
      </div>
    <% end %>
  </div>

  <div class="col-md-4">
    <h3>Ingrédients</h3>
    <% if @recipe.user == current_user %>
      <%= link_to "Ajouter un ingrédient", new_recipe_ingredient_path(@recipe), class: "btn btn-gradient mb-3" %>
    <% end %>

    <% if @recipe.ingredients.any? %>
      <ul class="list-group">
        <% @recipe.ingredients.each do |ingredient| %>
          <li class="list-group-item d-flex justify-content-between">
            <span><strong><%= ingredient.name %></strong> - <%= ingredient.quantity %></span>
            <% if @recipe.user == current_user %>
              <%= button_to "×", recipe_ingredient_path(@recipe, ingredient), method: :delete, class: "btn btn-sm btn-danger" %>
            <% end %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted">Aucun ingrédient ajouté pour le moment.</p>
    <% end %>
  </div>
</div>
